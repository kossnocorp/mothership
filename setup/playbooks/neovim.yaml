---
- name: Set up Neovim
  hosts: localhost
  connection: local

  tasks:
    - name: Debian/Ubuntu set up
      when: ansible_os_family == "Debian"
      become: yes
      block:
        - name: Update apt cache
          apt:
            update_cache: yes
            cache_valid_time: 3600

        - name: Install Neovim
          apt:
            name: neovim
            state: present

    - name: macOS set up
      when: ansible_system == "Darwin"
      block:
        - name: Update Homebrew
          homebrew:
            update_homebrew: true

        - name: Install Neovim
          homebrew:
            name: neovim
            state: present
